{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/17812/Documents/HBuilderProjects/a/pages/order-confirm/order-confirm.vue?8ea4","webpack:///C:/Users/17812/Documents/HBuilderProjects/a/pages/order-confirm/order-confirm.vue?7cd0","webpack:///C:/Users/17812/Documents/HBuilderProjects/a/pages/order-confirm/order-confirm.vue?475a","webpack:///C:/Users/17812/Documents/HBuilderProjects/a/pages/order-confirm/order-confirm.vue?092f","uni-app:///pages/order-confirm/order-confirm.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,oH;AACAA,UAAU,CAACC,qBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;;;AAG5D;AAC+L;AAC/L,gBAAgB,gMAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAsvB,CAAgB,stBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuF1wB,gD;;;;;AAKA;AACA;AACA,4BADA;AAEA,gBAFA,EADA;;AAKA;AACA,sDADA;AAEA;AACA,wDADA,GAFA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAZA,mBAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArBA;;AAuBA,aAvBA,uBAuBA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA,OALA;AAMA;AACA,KA/BA,GALA;;AAsCA,MAtCA,kBAsCA;AACA;AACA,iBADA,EACA;AACA,oBAFA,EAEA;AACA,iBAHA;AAIA,eAJA,EAIA;AACA,oBALA,EAKA;AACA;AACA,aADA,EACA;AACA,eAFA;AAGA,gBAHA,EANA;;;AAYA,GAnDA;AAoDA,QApDA,oBAoDA;AACA;AACA;AACA;AACA;AACA,+DADA;;AAGA;AACA;AACA,GA7DA;AA8DA,QA9DA,kBA8DA,CA9DA,EA8DA;AACA;AACA;AACA,0BADA;AAEA,oBAFA;;AAIA;AACA,gBADA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAHA;;AAKA;AACA;AACA;AACA,KAFA;;AAIA;AACA;;AAEA,GA9FA;AA+FA,UA/FA,sBA+FA;AACA;AACA;AACA;AACA,GAnGA;AAoGA;AACA;AACA;AACA,kBAFA,4BAEA;AACA;AACA,8BADA;AAEA;AACA,mBADA,EAFA;AAIA,UAJA,CAIA;AACA;AACA,sCAFA,CAEA;AACA,OAPA,EAOA,KAPA,CAOA;AACA;AACA,8BADA;AAEA,sBAFA;;AAIA,OAZA;AAaA,KAhBA;AAiBA;AACA,kBAlBA,4BAkBA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BADA;AAEA,sBAFA;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,kBADA;AAEA,wBAFA,GADA;;;AAMA,+BAPA,CAOA;AACA;AACA,4BATA,CASA;AACA;AACA;AACA,OAZA,EAYA,IAZA;;;;AAgBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAvGA;AAwGA,gBAxGA,0BAwGA;AACA;AACA,2DADA;;AAGA,KA5GA;AA6GA;AACA,cA9GA,wBA8GA;AACA;AACA;AACA,gCADA,GADA;;;AAKA,KApHA,EArGA,E","file":"pages/order-confirm/order-confirm.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/order-confirm/order-confirm.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order-confirm.vue?vue&type=template&id=3d28758a&\"\nvar renderjs\nimport script from \"./order-confirm.vue?vue&type=script&lang=js&\"\nexport * from \"./order-confirm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order-confirm/order-confirm.vue\"\nexport default component.exports","export * from \"-!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-confirm.vue?vue&type=template&id=3d28758a&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-confirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../QMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-confirm.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view style=\"background: #F5F5F5;min-height: 100%;height: auto;\">\r\n\t\t<!-- 地址选择 -->\r\n\t\t<!-- 点击cart的结算就会跳转到这个页面 -->\r\n\t\t<view class=\"main-bg-color text-white d-flex a-center px-3\" style=\"height: 250rpx;\"\r\n\t\t\thover-class=\"main-bg-hover-color\">\r\n\t\t\t<view>\r\n\t\t\t\t<!-- user-path-list页面三种情况(两个页面(全局)之间的传递uni.$on,uni.$emit)：有收货地址 || 没有收货地址 || 有收货地址，对收货地址不满意要修改 -->\r\n\t\t\t\t<template v-if=\"path\">\r\n\t\t\t\t\t<!-- <view  @click=\"openPathList\"> -->\r\n\t\t\t\t\t<view class=\"font-weight d-flex a-center font-sm\">\r\n\t\t\t\t\t\t{{path.name}} {{path.phone}}\r\n\t\t\t\t\t\t<view class=\"border border-white rounded px-1 font-1 ml-2\" v-if=\"path.isdefault\">默认</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"font-2 py\">\r\n\t\t\t\t\t\t{{path.province}} {{path.city}} {{path.district}} {{path.address}}\r\n\t\t\t\t\t\t<!-- {{path.path}} {{path.detailPath}} -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- </view> -->\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<!-- 将path.js的所有对象的isdefault改为false -->\r\n\t\t\t\t\t<view @click=\"openPathList\" class=\"font-weight font-sm d-flex a-center\">\r\n\t\t\t\t\t\t请选择收货地址\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"iconfont icon-you ml-auto\"></view>\r\n\t\t</view>\r\n\r\n\t\t<!-- showArrow代表右箭头图标 -->\r\n\t\t<view style=\"border-top-left-radius: 25rpx;border-top-right-radius: 25rpx;margin-top: -25rpx;overflow: hidden;\">\r\n\t\t\t<view class=\"bg-white\">\r\n\t\t\t\t<uni-list-item showArrow>\r\n\t\t\t\t\t<view class=\"d-flex a-center\">\r\n\t\t\t\t\t\t<image v-for=\"(item,index) in goodsList\" :key=\"index\" :src=\"item.cover\"\r\n\t\t\t\t\t\t\tstyle=\"width: 100rpx;height: 100rpx;\" class=\"rounded mr\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view slot=\"rightContent\">共{{goodsList.length}}件</view>\r\n\t\t\t\t</uni-list-item>\r\n\t\t\t\t<uni-list-item title=\"商品总价\" :showArrowIcon=\"false\">\r\n\t\t\t\t\t<view slot=\"rightContent\">\r\n\t\t\t\t\t\t<price color=\"text-dark\">{{price}}</price>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-list-item>\r\n\t\t\t\t<uni-list-item title=\"运费\" :showArrowIcon=\"false\">\r\n\t\t\t\t\t<view slot=\"rightContent\">包邮</view>\r\n\t\t\t\t</uni-list-item>\r\n\t\t\t\t\t<uni-list-item title=\"优惠券\" @click=\"openCoupon\">\r\n\t\t\t\t\t\t<!-- <view slot=\"rightContent\" class=\"text-light-muted\">无可用</view> -->\r\n\t\t\t\t\t\t<view slot=\"rightContent\" :class=\"couponCount>0?'main-text-color':'text-light-muted'\">\r\n\t\t\t\t\t\t\t<!-- coupon.id>0,表示有优惠券，因为data固定写了假的 -->\r\n\t\t\t\t\t\t\t<text v-if=\"coupon.id > 0\">{{coupon.type===0 ? '-'+coupon.value+'元':coupon.value+'折'}}</text>\r\n\t\t\t\t\t\t\t<text v-else>{{couponCount===0?'无可用':couponCount+'张可用'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</uni-list-item>\r\n\t\t\t\t<uni-list-item :showArrowIcon=\"false\">\r\n\t\t\t\t\t<text class=\"main-text-color\">小计</text>\r\n\t\t\t\t\t<view slot=\"rightContent\">\r\n\t\t\t\t\t\t<price>{{price}}</price>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-list-item>\r\n\t\t\t\t<divider></divider>\r\n\t\t\t\t<uni-list-item title=\"发票\" extraStyle=\"width:300upx;\">\r\n\t\t\t\t\t<view slot=\"rightContent\">电子发票-个人</view>\r\n\t\t\t\t</uni-list-item>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"position-fixed d-flex a-center j-end border bottom-0 left-0 right-0 bg-white p font-3\">\r\n\t\t\t合计:\r\n\t\t\t<view class=\"ml\">\r\n\t\t\t\t<price>{{price}}</price>\r\n\t\t\t</view>\r\n\t\t\t<view :class=\"loading?'bg-secondary':'main-bg-color'\" class=\"ml-2 px-2 py-1 text-white font-3\" hover-class=\"main-bg-hover-color\"\r\n\t\t\t\tstyle=\"border-radius: 80rpx;\" @click=\"openPayMethods\">\r\n\t\t\t\t{{loading?'加载中':'去支付'}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport uniListItem from \"@/components/uni-ui/uni-common/uni-list-item/uni-list-item.vue\"\r\n\timport price from \"@/components/price.vue\"\r\n\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapGetters\r\n\t} from 'vuex'\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tuniListItem,\r\n\t\t\tprice\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapGetters(['defaultPath','totalPrice']), //对于getters,这里用this.defaultPath才能打印值\r\n\t\t\t...mapState({\r\n\t\t\t\tlist: state => state.cart.list\r\n\t\t\t}),\r\n\t\t\t// 商品列表，简写\r\n\t\t\t// goodsList() {\r\n\t\t\t// \treturn this.items.map(id => {\r\n\t\t\t// \t\treturn this.list.find(v => v.id === id) //拿到数组\r\n\t\t\t// \t})\r\n\t\t\t// },\r\n\t\t\t// 最终价格\r\n\t\t\tprice() {\r\n\t\t\t\t// 没有优惠券\r\n\t\t\t\tif (this.coupon.id === 0) {\r\n\t\t\t\t\treturn this.totalPrice\r\n\t\t\t\t}\r\n\t\t\t\tif (this.coupon.type === 0) { //type:0固定金额(满减),1百分比(折扣)\r\n\t\t\t\t\treturn this.totalPrice - this.coupon.value\r\n\t\t\t\t}\r\n\t\t\t\treturn (this.totalPrice * (this.coupon.value / 10)).toFixed(2)\r\n\t\t\t},\r\n\r\n\t\t\tgoodsList(){\r\n\t\t\t\tlet list=this.items.map(id=>{\r\n\t\t\t\t\tlet obj=this.list.find(v=>{ //find比对拿到封面图\r\n\t\t\t\t\t\treturn v.id===id\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn obj\r\n\t\t\t\t})\r\n\t\t\t\treturn list\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\torder_id:0,//订单id\r\n\t\t\t\tloading:false,//用户可能会点击去支付2次\r\n\t\t\t\tpath: false,\r\n\t\t\t\titems: [], //[12, 13]\r\n\t\t\t\tcouponCount: 0, //获取可用优惠券数量\r\n\t\t\t\tcoupon: {\r\n\t\t\t\t\tid: 0, //coupon.id>0,表示有，因为这里固定写了假的\r\n\t\t\t\t\ttype: 0,\r\n\t\t\t\t\tvalue: 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow(){\r\n\t\t\t// this.order是在创建订单成功返回的res中拿到的，表示提交过订单了\r\n\t\t\t// 如果已经提交过订单了，重定向到订单详情页\r\n\t\t\tif(this.order_id>0){\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl:'../order-detail/order-detail?id='+this.order_id,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tconsole.log(this.order_id,'ddd')\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tif (!e.detail) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请选择要下单的商品',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn uni.navigateBack({\r\n\t\t\t\t\tdelta: 1\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.items = JSON.parse(e.detail)\r\n\t\t\t// console.log(e.detail) //[1793,1790,1791]\r\n\r\n\t\t\t// console.log(this.defaultPath,this.defaultPath[0]) //第一个拿到默认为true的数组，第二个拿到默认为true的对象\r\n\t\t\tif (this.defaultPath.length) { //判断是否存在默认地址，this.defaultPath.length为1\r\n\t\t\t\tthis.path = this.defaultPath[0]\r\n\t\t\t}\r\n\r\n\t\t\t// 开启监听选择收货地址事件\r\n\t\t\tuni.$on('choosePath', (res) => { //uni.$on和uni.$emit互相传递(全局)参数\r\n\t\t\t\tconsole.log('接收到参数', res)\r\n\t\t\t\tthis.path = res\r\n\t\t\t})\r\n\r\n\t\t\t// 监听选择优惠券，order-coupon\r\n\t\t\tuni.$on('couponUser', (res) => {\r\n\t\t\t\tthis.coupon = res\r\n\t\t\t})\r\n\r\n\t\t\t// 计算当前价格有多少张可用优惠券\r\n\t\t\tthis.getCouponCount()\r\n\r\n\t\t},\r\n\t\tonUnload(){ //卸载\r\n\t\t\t// 关闭监听选择收货地址事件\r\n\t\t\tuni.$off('choosePath')\r\n\t\t\tuni.$off('couponUser')\r\n\t\t},\r\n\t\t// order-coupon和coupon和order-confirm\r\n\t\tmethods: {\r\n\t\t\t// 获取可用优惠券数量 //status等于0代表失效，1代表有效\r\n\t\t\tgetCouponCount() { //used:0未使用,1已使用 //type:0固定金额(满减),1百分比(折扣)\r\n\t\t\t\tthis.$H.post('/coupon_count', {\r\n\t\t\t\t\tprice: this.totalPrice\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttoken: true\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.couponCount = res\r\n\t\t\t\t\tconsole.log(res,'获取可用优惠券数量') //0\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '获取可用优惠券数量失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t //去支付/创建订单页\r\n\t\t\topenPayMethods() {\r\n\t\t\t\r\n\t\t\t// 防止重复下单\r\n\t\t\tif(this.loading){\r\n\t\t\t\tconsole.log(this.loading,'this.loading')\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\t// 判断是否选择收货地址\r\n\t\t\t\tif(!this.path){\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle:'请选择收货地址',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.loading=true\r\n\t\t\t\t\r\n\t\t\t\tlet id=this.goodsList.map(v=>v.id)\r\n\t\t\t\tlet price=this.goodsList.map(v=>v.pprice)\r\n\t\t\t\tid=id.join(',')\r\n\t\t\t\tprice=price.join(',')\r\n\t\t\t// // \tfor(let i=0;i<this.goodsList.length;i++){\r\n\t\t\t// // \t\tif(i!==i){\r\n\t\t\t\t\t\t\r\n\t\t\t// // price=price[i]\r\n\t\t\t// // \tprice+=price\r\n\t\t\t\t\r\n\t\t\t// // \t}\r\n\t\t\t// // \t}\r\n\t\t\t\t\r\n\t\t\t\t// console.log(id,price)\r\n\t\t\t\t\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tuni.navigateTo({ //创建订单成功再去跳转\r\n\t\t\t\t\t\t\turl:'../pay-methods/pay-methods?detail='+JSON.stringify({\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tprice\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.loading=false //写在.then和.catch里的跳转页面之前(支付成功或失败都要还原状态)\r\n\t\t\t\t\t\tconsole.log(this.loading,'setTimeout')\r\n\t\t\t\t\t\t this.order_id=2 //创建订单成功返回的res中拿到的\r\n\t\t\t\t\t// 通知购物车更新数据，创建好订单页后通知购物车要更新\r\n\t\t\t\t\tuni.$emit('updateCart')\r\n\t\t\t\t\t},2000)\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t// let options={\r\n\t\t\t\t// \tuser_addresses_id:this.path.id,\r\n\t\t\t\t// \titems:this.items.join(',')\r\n\t\t\t\t// }\r\n\t\t\t\t\r\n\t\t\t\t// // 是否选择优惠券\r\n\t\t\t\t// if(this.coupon.id>0){ //表示有优惠券\r\n\t\t\t\t// \toptions.coupon_user_id=this.coupon.id\r\n\t\t\t\t// }\r\n\t\t\t\t\r\n\t\t\t\t// this.$H.post('/order',options,{ //购物车下单/创建订单\r\n\t\t\t\t// \ttoken:true\r\n\t\t\t\t// }).then(res=>{\r\n\t\t\t\t// \tconsole.log(res,'服务端失败')\r\n\t\t\t\t// this.loading=false\r\n\t\t\t\t// \tuni.navigateTo({ //创建订单成功再去跳转\r\n\t\t\t\t// \t\turl:'../pay-methods/pay-methods?detail='+JSON.stringify({\r\n\t\t\t\t// \t\t\tid:res.id,\r\n\t\t\t\t// \t\t\tprice:res.total_price\r\n\t\t\t\t// \t\t})\r\n\t\t\t\t// \t})\r\n\t\t\t\t// // 保存订单id\r\n\t\t\t\t// this.order_id=res.id\r\n\t\t\t\t// // 通知购物车更新数据，创建好订单页后通知购物车要更新\r\n\t\t\t\t// uni.$emit('updateCart')\r\n\t\t\t\t\r\n\t\t\t\t// }).catch(err=>{\r\n\t\t\t\t// \tconsole.log(err) //undefined\r\n\t\t\t\t// \tuni.showToast({\r\n\t\t\t\t// \t\ttitle:'创建订单失败',\r\n\t\t\t\t// \t\ticon:'none'\r\n\t\t\t\t// \t})\r\n\t\t\t\t// })\r\n\t\t\t\t\r\n\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t// \turl: '../pay-methods/pay-methods'\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\topenPathList() { //点击请选择收货地址\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../user-path-list/user-path-list?type=choose'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 选择优惠券\r\n\t\t\topenCoupon(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'../order-coupon/order-coupon?detail='+JSON.stringify({\r\n\t\t\t\t\t\tprice:this.totalPrice\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n"],"sourceRoot":""}